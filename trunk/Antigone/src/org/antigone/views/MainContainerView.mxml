<?xml version="1.0" encoding="utf-8"?>
<mx:VBox xmlns:mx="http://www.adobe.com/2006/mxml"
	xmlns:mediators="org.antigone.mediators.*"
	xmlns:views="org.antigone.views.*"
	xmlns:formatters="org.antigone.formatters.*">
	
	<mx:Script>
		<![CDATA[
			import org.antigone.controllers.LoginProvider;
			import mx.core.Application;
			
			[Bindable]
			protected var loginProvider:LoginProvider = Application.application.c.LoginProvider;
		]]>
	</mx:Script>

	<!-- Mediator -->
	<mediators:MainContainerMediator id="mediator" view="{this}" />
	
	<!-- Disconnect box -->
	<formatters:UserNameFormatter id="userNameFormatter" />
	<mx:HBox id="disconnectBox" width="100%" right="0" top="0" horizontalAlign="right"
		visible="{!(loginProvider.currentUser == null)}"
		includeInLayout="{!(loginProvider.currentUser == null)}">
			<mx:Label text="Bonjour, {userNameFormatter.format(loginProvider.currentUser)} !"/>
			<mx:Button label="Se dÃ©connecter" fontSize="8" height="18" width="101" id="logoutButton" click="mediator.DisconnectButtonClicked()"/>
	</mx:HBox>
		
	<!-- Views -->
	<mx:ViewStack id="mainViewStack" width="100%" height="100%">
		
		<mx:HBox id="loginView" horizontalAlign="center">
			<views:UserFormsView userConnected="mediator.LoginSucceeded()"/>
		</mx:HBox>
		
		<views:DashboardView id="dashboardView" width="100%" height="100%"
			userDisconnected="mediator.UserDisconnected()"
			lessonSelected="mediator.LessonSelected(event)" />
		
		<views:LessonView id="lessonView" model="{null}"/>
		
	</mx:ViewStack>
	
</mx:VBox>
